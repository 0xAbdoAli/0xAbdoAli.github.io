---
layout: post
title: NodeJs
date: 2023-02-23
categories: [Backend, NodeJs]
---

## Node.js Modules

In Node.js, modules are used to organize code and make it reusable. A module is a collection of functions, objects,Here are some key concepts to understand about Node.js modules:

1. Importing a module: To use a module in another file, you can import it using the `require()` function. This function takes a path to the module file and returns the exported object or function example: 
```js
const http = require ('http');
```


2. Exporting a module: To make a module available for use in another file, you can export it using the `module.exports` object. This can be done by assigning a function or an object to `module.exports`.


3. Built-in modules: Node.js has several built-in modules that can be used without installing any external packages. These include modules for working with the file system, networking, and cryptography.

4. External modules: Node.js also has a large ecosystem of external modules that can be installed using NPM. These modules can be used to add additional functionality to your application, such as working with databases, implementing authentication, or integrating with third-party APIs.

5. Creating a module: To create a new module, you can simply create a new file and export the desired functions or objects. You can also include a `package.json` file to define metadata about the module, such as its name, version, and dependencies.
Let's say we want to create a module that provides some utility functions for working with strings. We can start by creating a new file called stringUtils.js with the following code:
``` js
// stringUtils.js
function reverseString(str) {
  return str.split('').reverse().join('');
}

function capitalizeString(str) {
  return str.charAt(0).toUpperCase() + str.slice(1);
}

module.exports = {
  reverseString,
  capitalizeString
}
```

# Node.js HTTP Module


The Node.js http module is used to create a Node.js web server. The http module can be used to perform the following tasks:

- Create a Node.js web server.
- Read HTTP request data.
- Write HTTP response data.
- Set HTTP response headers.

Here are some key concepts to understand about the Node.js http module:

## Creating a Node.js web server
To create a Node.js web server, you can use the `createServer()` method of the http module. This method takes a callback function as a parameter, which is called each time a request is made to the server.

```javascript
const http = require('http');

http.createServer((req, res) => {
  res.writeHead(200, {'Content-Type': 'text/html'});
  res.end('Hello World!');
}).listen(8080);
```
## Reading HTTP request data
The request object passed to the callback function of `createServer()` contains information about the incoming HTTP request. This object has properties such as `url` and method, which can be used to read data from the request.

```javascript 
const http = require('http');

http.createServer((req, res) => {
  console.log(req.url); 
  console.log(req.method);
  res.writeHead(200, {'Content-Type': 'text/html'});
  res.end('Hello World!');
}).listen(8080);
```
we can Split the Query String using `url.parse()` method  like this 
``` js
const http = require('http');
const url = require('url');

http.createServer((req, res) => {
  const query = url.parse(req.url, true).query;
  const name = query.name;
  const age = query.age;

  res.writeHead(200, {'Content-Type': 'text/html'});
  res.write(`Name: ${name}, Age: ${age}`);
  res.end();
}).listen(80);
```
be visiting the `http://127.0.0.1/?name=Abdo&age=21 `
you should see that the query had been splited into `name:Abdo,Age:21`

## Writing HTTP response data
The response object passed to the callback function of createServer() is used to write data to the HTTP response. This object has methods such as `writeHead()` and `end()`, which can be used to write the response data.

``` js
const http = require('http');

http.createServer((req, res) => {
  res.writeHead(200, {'Content-Type': 'text/html'});
  res.write('<h1>Hello World!</h1>');
  res.end();
}).listen(8080);
```

## Setting HTTP response headers
The response object can be used to set HTTP response headers, such as the Content-Type header, using the setHeader() method.
```js
const http = require('http');

http.createServer((req, res) => {
  res.setHeader('Content-Type', 'text/html');
  res.write('<h1>Hello World!</h1>');
  res.end();
}).listen(8080);
```
# Node.js File System Module
The Node.js file system module allows you to work with the file system on your computer. It provides a lot of useful functions to :  

- Read files
- Create files
- Delete files
- Rename files


## Read files
The `fs.readFile()` method is used to read files on your computer.

Assume we have the following HTML file (located in the same folder as Node.js):

```html
<html>
<body>
<h1>My Header</h1>
<p>My paragraph.</p>
</body>
</html>
```
```js
const http = require('http');
const fs = require('fs');
http.createServer(function (req, res) {
  fs.readFile('demofile1.html', function(err, data) {
    res.writeHead(200, {'Content-Type': 'text/html'});
    res.write(data);
    return res.end();
  });
}).listen(8080);
```
When a client makes an HTTP request to the server will response with the content of the html file

## Create Files 
To create a file, you can use this
- `fs.writeFile()` 
this methos takes three parameters: the path of the file, the data you want to write, and a callback function that will be called when the file is written.

```js
const fs = require('fs');

fs.writeFile('example.txt', 'Hello, World!', (err) => {
  if (err) throw err;
  console.log('File written!');
});
```
- the `fs.appendFile()`method appends specified content to a file. If the file does not exist, the file will be created
- The `fs.open()` method takes a "flag" as the second argument, if the flag is "w" for "writing", the specified file is opened for writing. If the file does not exist, an empty file is created

## Delete files
 
To delete a file with the File System module, use the `fs.unlink()` method.

The `fs.unlink()` method deletes the specified file. Here is an example:
```js
const fs = require('fs');

fs.unlink('mynewfile2.txt', function (err) {
  if (err) throw err;
  console.log('File deleted!');
});
```
## Rename Files
To rename a file with the File System module,  use the `fs.rename()` method.

The `fs.rename()` method renames the specified file:
```js 
const fs = require('fs');

fs.rename('mytext.txt', 'newtext.txt', function (err) {
  if (err) throw err;
  console.log('File Renamed!');
});
```
## working with directories
## Reading directories
 we can use the `fs.readdir()` method. This method takes a path to a directory and a callback function that is called when the operation is complete. The callback function takes two parameters, err and files. If the operation is successful, the files parameter will contain an array of file names in the directory.
```js
const fs = require('fs');

fs.readdir('.', (err, files) => {
  if (err) {
    console.log(err);
  } else {
    console.log(files);
  }
});
```
## Creating directories
 To create a directory, you can use the `fs.mkdir()` method. This method takes two parameters: the path of the directory and a callback function that will be called when the directory is created.
 ```js 
 const fs = require('fs');

fs.mkdir('mydir', (err) => {
  if (err) throw err;
  console.log('Directory created!');
});
```
## deleting a directory
 we can use the `fs.rmdir()` method. This method takes a path to the directory to be deleted 
 ```js
 const fs = require('fs');

fs.rmdir('newDirectory', (err) => {
  if (err) {
    console.log(err);
  } else {
    console.log('Directory deleted successfully.');
  }
});
```
